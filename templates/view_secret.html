{% extends "base.html" %}
{% block title %}View Your Secret{% endblock %}

{% block head_meta %}
    <meta http-equiv="refresh" content="10; url={{ url_for('home') }}">
{% endblock %}

{% block content %}
    <h2>ðŸš¨ Secret View Access</h2>
    <p>This secret was retrieved and has been **permanently deleted** from the server. It can never be viewed again. Click the button to reveal the content. This page will automatically redirect in 10 seconds.</p>

    <div class="alert alert-success" id="secret-box">
        <span id="secret-field" data-secret="{{ secret }}">â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢</span>
    </div>

    <button class="btn" id="reveal-btn">Reveal Secret Content</button>

    <script>
        document.getElementById('reveal-btn').addEventListener('click', function() {
            var secretField = document.getElementById('secret-field');
            var secret = secretField.getAttribute('data-secret');
            
            // Reveal the secret
            secretField.textContent = secret;
            
            // Change button to a confirmation message, then hide
            this.textContent = 'Secret Revealed!';
            this.style.backgroundColor = '#10b981'; /* Green color */
            this.disabled = true;

            setTimeout(function() {
                document.getElementById('reveal-btn').style.display = 'none';
            }, 2000);
        });
    </script>
{% endblock %}